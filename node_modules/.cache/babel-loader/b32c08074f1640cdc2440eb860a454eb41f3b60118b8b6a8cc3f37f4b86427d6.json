{"ast":null,"code":"import _slicedToArray from\"C:/Users/\\u6995\\u5BB6/Desktop/\\u6995\\u5BB6\\u7684react4.0/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Total=function Total(props){// 篩選日期\nuseEffect(function(){var startDate=props.start_date!==\"\"?new Date(props.start_date):null;var endDate=props.end_date!==\"\"?new Date(props.end_date):null;//總收支日期\nvar newDate=props.database_data.filter(function(item){var date=new Date(item.today_date);return(!startDate||date>=startDate)&&(!endDate||date<=endDate);});props.set_select_database_data(newDate);props.set_render_data(newDate);//總收入日期\nvar new_plus_Date=props.account_plus_data.filter(function(item){var date=new Date(item.today_date);return(!startDate||date>=startDate)&&(!endDate||date<=endDate);});props.set_select_account_plus_data(new_plus_Date);//總支出日期\nvar new_minus_Date=props.account_minus_data.filter(function(item){var date=new Date(item.today_date);return(!startDate||date>=startDate)&&(!endDate||date<=endDate);});props.set_select_account_minus_data(new_minus_Date);},[props.start_date,props.end_date]);//篩選日期後的價格計算\nuseEffect(function(){// 計算收入price\nvar plus_price=props.select_account_plus_data.reduce(function(acc,obj){var price=parseFloat(obj.price);return acc+price;},0);// 計算支出price\nvar minus_price=props.select_account_minus_data.reduce(function(acc,obj){var price=parseFloat(obj.price);return acc+price;},0);// 計算總和price\nvar total_price=plus_price-minus_price;props.set_account_plus_data_price(plus_price);props.set_account_minus_data_price(minus_price);props.set_database_data_price(total_price);},[props.select_database_data,props.select_account_plus_data,props.select_account_minus_data]);// 不同button被click後換顏色跟字體跟價錢和模式\nvar _useState=useState(1),_useState2=_slicedToArray(_useState,2),button_state=_useState2[0],set_button_state=_useState2[1];var change_bg_color=button_state==1?\"bg_gray\":button_state==2?\"bg_green\":\"bg_yellow\";var change_text_color=button_state==1?\"text_gray\":button_state==2?\"text_green\":\"text_yellow\";var change_text=button_state==1?\"收支\":button_state==2?\"收入\":\"支出\";var change_button_state1=function change_button_state1(){set_button_state(1);props.set_render_data(props.select_database_data);props.set_render_price(props.database_data_price);};var change_button_state2=function change_button_state2(){set_button_state(2);props.set_render_data(props.select_account_plus_data);props.set_render_price(props.account_plus_data_price);};var change_button_state3=function change_button_state3(){set_button_state(3);props.set_render_data(props.select_account_minus_data);props.set_render_price(props.account_minus_data_price);};return/*#__PURE__*/_jsx(\"div\",{className:\"mt-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"border shadow-lg row mx-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-3 p-3   \".concat(change_bg_color),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main_button_box\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){change_button_state1();}}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){change_button_state2();}}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){change_button_state3();}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column justify-content-center align-items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-light\",children:\"\\u7E3D\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-light\",children:change_text})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-9 row p-5 d-flex flex-column \",children:[/*#__PURE__*/_jsx(\"div\",{className:\" text-center\",children:/*#__PURE__*/_jsxs(\"h1\",{className:\"\".concat(change_text_color),children:[\"$\",props.render_price]})}),/*#__PURE__*/_jsxs(\"div\",{className:\" d-flex justify-content-center text-center \",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\u958B\\u59CB\\u65E5\\u671F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:props.start_date,onChange:function onChange(e){props.set_start_date(e.target.value);},className:\"mx-5\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"\\u7D50\\u675F\\u65E5\\u671F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:props.end_date,onChange:function onChange(e){props.set_end_date(e.target.value);},className:\"mx-5\"})]})]})]})});};export default Total;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Total","props","startDate","start_date","Date","endDate","end_date","newDate","database_data","filter","item","date","today_date","set_select_database_data","set_render_data","new_plus_Date","account_plus_data","set_select_account_plus_data","new_minus_Date","account_minus_data","set_select_account_minus_data","plus_price","select_account_plus_data","reduce","acc","obj","price","parseFloat","minus_price","select_account_minus_data","total_price","set_account_plus_data_price","set_account_minus_data_price","set_database_data_price","select_database_data","_useState","_useState2","_slicedToArray","button_state","set_button_state","change_bg_color","change_text_color","change_text","change_button_state1","set_render_price","database_data_price","change_button_state2","account_plus_data_price","change_button_state3","account_minus_data_price","className","children","concat","onClick","render_price","type","value","onChange","e","set_start_date","target","set_end_date"],"sources":["C:/Users/榕家/Desktop/榕家的react4.0/front-end/src/component/total/total.jsx"],"sourcesContent":["import React from 'react'\r\nimport { useEffect, useState } from 'react';\r\n\r\nconst Total = (props) => {\r\n\r\n  // 篩選日期\r\n\r\n  useEffect(() => {\r\n    const startDate = props.start_date !== \"\" ? new Date(props.start_date) : null;\r\n    const endDate = props.end_date !== \"\" ? new Date(props.end_date) : null;\r\n\r\n    //總收支日期\r\n    const newDate = props.database_data.filter(item => {\r\n      const date = new Date(item.today_date);\r\n      return (!startDate || date >= startDate) && (!endDate || date <= endDate);\r\n\r\n    })\r\n    props.set_select_database_data(newDate)\r\n    props.set_render_data(newDate)\r\n\r\n    //總收入日期\r\n    const new_plus_Date = props.account_plus_data.filter(item => {\r\n      const date = new Date(item.today_date);\r\n      return (!startDate || date >= startDate) && (!endDate || date <= endDate);\r\n\r\n    })\r\n    props.set_select_account_plus_data(new_plus_Date)\r\n\r\n    //總支出日期\r\n    const new_minus_Date = props.account_minus_data.filter(item => {\r\n      const date = new Date(item.today_date);\r\n      return (!startDate || date >= startDate) && (!endDate || date <= endDate);\r\n    })\r\n    props.set_select_account_minus_data(new_minus_Date)\r\n  }, [props.start_date, props.end_date]);\r\n\r\n  //篩選日期後的價格計算\r\n\r\n  useEffect(() => {\r\n    // 計算收入price\r\n    const plus_price = props.select_account_plus_data.reduce((acc, obj) => {\r\n      const price = parseFloat(obj.price);\r\n      return acc + price;\r\n    }, 0);\r\n\r\n\r\n    // 計算支出price\r\n    const minus_price = props.select_account_minus_data.reduce((acc, obj) => {\r\n      const price = parseFloat(obj.price);\r\n      return acc + price;\r\n    }, 0);\r\n\r\n\r\n    // 計算總和price\r\n    const total_price = plus_price - minus_price\r\n\r\n    props.set_account_plus_data_price(plus_price)\r\n    props.set_account_minus_data_price(minus_price)\r\n    props.set_database_data_price(total_price)\r\n  }, [props.select_database_data, props.select_account_plus_data, props.select_account_minus_data])\r\n\r\n  // 不同button被click後換顏色跟字體跟價錢和模式\r\n  const [button_state, set_button_state] = useState(1)\r\n  const change_bg_color = button_state == 1 ? \"bg_gray\" : button_state == 2 ? \"bg_green\" : \"bg_yellow\"\r\n  const change_text_color = button_state == 1 ? \"text_gray\" : button_state == 2 ? \"text_green\" : \"text_yellow\"\r\n  const change_text=button_state == 1 ? \"收支\" : button_state == 2 ? \"收入\" : \"支出\"\r\n\r\n  const change_button_state1 = () => {\r\n\r\n    set_button_state(1)\r\n    props.set_render_data(props.select_database_data)\r\n    props.set_render_price(props.database_data_price)\r\n\r\n\r\n  }\r\n\r\n  const change_button_state2 = () => {\r\n\r\n    set_button_state(2)\r\n    props.set_render_data(props.select_account_plus_data)\r\n    props.set_render_price(props.account_plus_data_price)\r\n\r\n\r\n\r\n  }\r\n\r\n  const change_button_state3 = () => {\r\n    set_button_state(3)\r\n    props.set_render_data(props.select_account_minus_data)\r\n    props.set_render_price(props.account_minus_data_price)\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  return <div className='mt-5'>\r\n    <div className='border shadow-lg row mx-5'>\r\n      <div className={`col-3 p-3   ${change_bg_color}`}>\r\n        <div className='main_button_box'>\r\n          <button onClick={() => { change_button_state1() }}></button>\r\n          <button onClick={() => { change_button_state2() }}></button>\r\n          <button onClick={() => { change_button_state3() }}></button>\r\n        </div>\r\n        <div className='d-flex flex-column justify-content-center align-items-center'>\r\n          <h1 className='text-light'>總</h1>\r\n          <h3 className='text-light'>{change_text}</h3>\r\n        </div>\r\n      </div>\r\n      <div className='col-9 row p-5 d-flex flex-column '>\r\n        <div className=' text-center'>\r\n          <h1 className={`${change_text_color}`}>${props.render_price}</h1>\r\n        </div>\r\n        <div className=' d-flex justify-content-center text-center '>\r\n          <h5>開始日期:</h5>\r\n          <input type=\"date\" value={props.start_date} onChange={(e) => { props.set_start_date(e.target.value) }} className='mx-5' />\r\n          <h5>結束日期:</h5>\r\n          <input type=\"date\" value={props.end_date} onChange={(e) => { props.set_end_date(e.target.value) }} className='mx-5' />\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n  </div>\r\n}\r\n\r\nexport default Total;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}